{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet HomePacienteComponent = class HomePacienteComponent {\n  constructor(pacienteService, router, route, renderer, toastr) {\n    this.pacienteService = pacienteService;\n    this.router = router;\n    this.route = route;\n    this.renderer = renderer;\n    this.toastr = toastr;\n    this.exibirPopupExclusao = false;\n    this.pacienteSelecionado = null;\n    this.sucessMessage = \"\";\n    this.exibirMensagem = false;\n    this.pacientes = [];\n    this.id = '';\n    this.agendamento = {\n      idAgendamento: 0,\n      idPaciente: 0\n    };\n    this.paciente = {\n      idPaciente: 0,\n      nomePaciente: '',\n      dataNascimentoPaciente: new Date(),\n      idadePaciente: 0,\n      cidade: '',\n      estado: '',\n      telefone: ''\n    };\n  }\n  ngOnInit() {\n    this.listarPacientes();\n    if (this.pacienteSelecionado) {\n      this.renderer.addClass(document.body, 'paciente-selecionado');\n    }\n  }\n  listarPacientes() {\n    this.pacienteService.getPaciente().subscribe(data => {\n      this.pacientes = data;\n      this.sortPacientesByNome();\n    });\n  }\n  buscarPaciente(id) {\n    this.pacienteService.getIdPaciente(parseInt(id)).subscribe(paciente => {\n      this.paciente = paciente;\n    }, error => {\n      console.error('Erro ao buscar paciente: ', error);\n    });\n  }\n  salvarPaciente() {\n    if (this.paciente.idPaciente) {\n      this.pacienteService.atualizarPaciente(this.paciente.idPaciente, this.paciente).subscribe(response => {\n        this.router.navigate(['/pacientes']);\n      }, error => {\n        console.error('Erro ao salvar paciente: ', error);\n      });\n    } else {\n      console.error('ID do paciente não definido.');\n    }\n  }\n  excluirPaciente() {\n    if (this.pacienteSelecionado && this.pacienteSelecionado.idPaciente) {\n      const idPaciente = this.pacienteSelecionado.idPaciente;\n      this.pacienteService.excluirPaciente(idPaciente).subscribe(() => {\n        this.sucessMessage = \"Paciente Excluído!\";\n        this.exibirMensagem = true;\n        setTimeout(() => {\n          this.toastr.success(this.sucessMessage, 'Sucesso');\n          this.router.navigate(['pacientes']);\n        }, 2000);\n        this.listarPacientes();\n        this.pacienteSelecionado = null;\n        this.exibirPopupExclusao = false;\n      });\n    } else {\n      console.log(\"Não encontrado ou erro\");\n    }\n  }\n  selecionarPaciente(paciente) {\n    this.pacienteSelecionado = paciente;\n  }\n  openPopup(paciente) {\n    console.log(\"Clicou\");\n    console.log(this.selectedPaciente = paciente);\n    this.selectedPaciente = paciente;\n  }\n  closePopup() {\n    this.selectedPaciente = null;\n    this.router.navigate(['/pacientes']);\n  }\n  sortPacientesByNome() {\n    this.pacientes = this.pacientes.filter(paciente => paciente.nomePaciente !== undefined);\n    this.pacientes.sort((a, b) => {\n      const nomeA = a.nomePaciente.toLowerCase();\n      const nomeB = b.nomePaciente.toLowerCase();\n      if (nomeA < nomeB) {\n        return -1;\n      }\n      if (nomeA > nomeB) {\n        return 1;\n      }\n      return 0;\n    });\n  }\n  voltarPagina() {\n    this.router.navigate(['pacientes']);\n  }\n};\nHomePacienteComponent = __decorate([Component({\n  selector: 'app-home-paciente',\n  templateUrl: './home-paciente.component.html',\n  styleUrls: ['./home-paciente.component.scss']\n})], HomePacienteComponent);\nexport { HomePacienteComponent };","map":{"version":3,"names":["Component","HomePacienteComponent","constructor","pacienteService","router","route","renderer","toastr","exibirPopupExclusao","pacienteSelecionado","sucessMessage","exibirMensagem","pacientes","id","agendamento","idAgendamento","idPaciente","paciente","nomePaciente","dataNascimentoPaciente","Date","idadePaciente","cidade","estado","telefone","ngOnInit","listarPacientes","addClass","document","body","getPaciente","subscribe","data","sortPacientesByNome","buscarPaciente","getIdPaciente","parseInt","error","console","salvarPaciente","atualizarPaciente","response","navigate","excluirPaciente","setTimeout","success","log","selecionarPaciente","openPopup","selectedPaciente","closePopup","filter","undefined","sort","a","b","nomeA","toLowerCase","nomeB","voltarPagina","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\welli\\front_pfmjg\\pfmjg\\src\\app\\module\\pages\\pacientes\\home-paciente\\home-paciente.component.ts"],"sourcesContent":["import { NgForOf } from '@angular/common';\nimport { Component, Directive, OnInit, Renderer2 } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ToastrService } from 'ngx-toastr';\nimport { Agendamento } from 'src/app/models/agendamento/agendamento';\nimport { Paciente } from 'src/app/models/paciente';\nimport { ServicePaciente } from 'src/app/services/service-paciente.service';\n@Component({\n  selector: 'app-home-paciente',\n  templateUrl: './home-paciente.component.html',\n  styleUrls: ['./home-paciente.component.scss']\n})\nexport class HomePacienteComponent implements OnInit{\n\n  exibirPopupExclusao = false;\n  pacienteSelecionado: Paciente | null = null;\n\n  sucessMessage: string = \"\";\n\n  exibirMensagem: boolean = false;\n\n  selectedPaciente: any;\n\n  pacientes: Paciente[] = [];\n\n  id: string = '';\n\n  agendamento: Agendamento = {\n    idAgendamento: 0,\n    idPaciente: 0,\n  }\n\n  paciente: Paciente = {\n    idPaciente: 0,\n    nomePaciente: '',\n    dataNascimentoPaciente: new Date(),\n    idadePaciente: 0,\n    cidade: '',\n    estado: '',\n    telefone: '',\n  };\n\n  constructor(private pacienteService: ServicePaciente, private router: Router, private route: ActivatedRoute,\n    private renderer: Renderer2, private toastr: ToastrService) {\n     }\n\n  ngOnInit(): void {\n    \n    this.listarPacientes();\n    if (this.pacienteSelecionado) {\n      this.renderer.addClass(document.body, 'paciente-selecionado');\n    }\n  }\n  \n  listarPacientes(): void {\n      this.pacienteService.getPaciente().subscribe(data => {\n      this.pacientes = data;\n      this.sortPacientesByNome();\n    })\n  }\n  \n  buscarPaciente(id: string): void {\n    this.pacienteService.getIdPaciente(parseInt(id)).subscribe(\n      paciente => {\n        this.paciente = paciente;\n      },\n      error => {\n        console.error('Erro ao buscar paciente: ', error);\n      }\n    );\n  }\n\n  salvarPaciente(): void {\n    if (this.paciente.idPaciente) {\n      this.pacienteService.atualizarPaciente(this.paciente.idPaciente, this.paciente).subscribe(\n        response => {\n          this.router.navigate(['/pacientes']);\n        },\n        error => {\n          console.error('Erro ao salvar paciente: ', error);\n        }\n      );\n    } else {\n      console.error('ID do paciente não definido.');\n    }\n  }\n\n  excluirPaciente() {\n\n\n    if (this.pacienteSelecionado && this.pacienteSelecionado.idPaciente) {\n\n      const idPaciente = this.pacienteSelecionado.idPaciente;\n      this.pacienteService.excluirPaciente(idPaciente). subscribe( () => {\n        \n        this.sucessMessage = \"Paciente Excluído!\";\n        this.exibirMensagem = true;\n        setTimeout(() => {\n          this.toastr.success(this.sucessMessage, 'Sucesso');\n          this.router.navigate(['pacientes']);\n        }, 2000)\n        this.listarPacientes();\n\n        this.pacienteSelecionado = null;\n        this.exibirPopupExclusao = false;\n      });\n    \n    }\n    else  {\n        console.log(\"Não encontrado ou erro\");\n    }\n  }\n\n  selecionarPaciente(paciente: Paciente): void {\n    this.pacienteSelecionado = paciente;\n  }\n\n  openPopup(paciente: any) {\n    console.log(\"Clicou\");\n    console.log(this.selectedPaciente = paciente);\n    this.selectedPaciente = paciente;\n  \n  }\n\n  closePopup() {\n    this.selectedPaciente = null;\n    this.router.navigate(['/pacientes']);\n  }\n\n  sortPacientesByNome() {\n    this.pacientes = this.pacientes.filter(paciente => paciente.nomePaciente !== undefined);\n    this.pacientes.sort((a, b) => {\n    const nomeA = a.nomePaciente!.toLowerCase();\n    const nomeB = b.nomePaciente!.toLowerCase();\n    if (nomeA < nomeB) {\n      return -1;\n    }\n    if (nomeA > nomeB) {\n      return 1;\n    }\n    return 0;\n  });\n  }\n  \n  voltarPagina(): void {\n    this.router.navigate(['pacientes'])\n  }\n\n}\n"],"mappings":";AACA,SAASA,SAAS,QAAsC,eAAe;AAWvE,IAAaC,qBAAqB,GAAlC,MAAaA,qBAAqB;EA8BhCC,YAAoBC,eAAgC,EAAUC,MAAc,EAAUC,KAAqB,EACjGC,QAAmB,EAAUC,MAAqB;IADxC,KAAAJ,eAAe,GAAfA,eAAe;IAA2B,KAAAC,MAAM,GAANA,MAAM;IAAkB,KAAAC,KAAK,GAALA,KAAK;IACjF,KAAAC,QAAQ,GAARA,QAAQ;IAAqB,KAAAC,MAAM,GAANA,MAAM;IA7B7C,KAAAC,mBAAmB,GAAG,KAAK;IAC3B,KAAAC,mBAAmB,GAAoB,IAAI;IAE3C,KAAAC,aAAa,GAAW,EAAE;IAE1B,KAAAC,cAAc,GAAY,KAAK;IAI/B,KAAAC,SAAS,GAAe,EAAE;IAE1B,KAAAC,EAAE,GAAW,EAAE;IAEf,KAAAC,WAAW,GAAgB;MACzBC,aAAa,EAAE,CAAC;MAChBC,UAAU,EAAE;KACb;IAED,KAAAC,QAAQ,GAAa;MACnBD,UAAU,EAAE,CAAC;MACbE,YAAY,EAAE,EAAE;MAChBC,sBAAsB,EAAE,IAAIC,IAAI,EAAE;MAClCC,aAAa,EAAE,CAAC;MAChBC,MAAM,EAAE,EAAE;MACVC,MAAM,EAAE,EAAE;MACVC,QAAQ,EAAE;KACX;EAIE;EAEHC,QAAQA,CAAA;IAEN,IAAI,CAACC,eAAe,EAAE;IACtB,IAAI,IAAI,CAACjB,mBAAmB,EAAE;MAC5B,IAAI,CAACH,QAAQ,CAACqB,QAAQ,CAACC,QAAQ,CAACC,IAAI,EAAE,sBAAsB,CAAC;;EAEjE;EAEAH,eAAeA,CAAA;IACX,IAAI,CAACvB,eAAe,CAAC2B,WAAW,EAAE,CAACC,SAAS,CAACC,IAAI,IAAG;MACpD,IAAI,CAACpB,SAAS,GAAGoB,IAAI;MACrB,IAAI,CAACC,mBAAmB,EAAE;IAC5B,CAAC,CAAC;EACJ;EAEAC,cAAcA,CAACrB,EAAU;IACvB,IAAI,CAACV,eAAe,CAACgC,aAAa,CAACC,QAAQ,CAACvB,EAAE,CAAC,CAAC,CAACkB,SAAS,CACxDd,QAAQ,IAAG;MACT,IAAI,CAACA,QAAQ,GAAGA,QAAQ;IAC1B,CAAC,EACDoB,KAAK,IAAG;MACNC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;IACnD,CAAC,CACF;EACH;EAEAE,cAAcA,CAAA;IACZ,IAAI,IAAI,CAACtB,QAAQ,CAACD,UAAU,EAAE;MAC5B,IAAI,CAACb,eAAe,CAACqC,iBAAiB,CAAC,IAAI,CAACvB,QAAQ,CAACD,UAAU,EAAE,IAAI,CAACC,QAAQ,CAAC,CAACc,SAAS,CACvFU,QAAQ,IAAG;QACT,IAAI,CAACrC,MAAM,CAACsC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC;MACtC,CAAC,EACDL,KAAK,IAAG;QACNC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACnD,CAAC,CACF;KACF,MAAM;MACLC,OAAO,CAACD,KAAK,CAAC,8BAA8B,CAAC;;EAEjD;EAEAM,eAAeA,CAAA;IAGb,IAAI,IAAI,CAAClC,mBAAmB,IAAI,IAAI,CAACA,mBAAmB,CAACO,UAAU,EAAE;MAEnE,MAAMA,UAAU,GAAG,IAAI,CAACP,mBAAmB,CAACO,UAAU;MACtD,IAAI,CAACb,eAAe,CAACwC,eAAe,CAAC3B,UAAU,CAAC,CAAEe,SAAS,CAAE,MAAK;QAEhE,IAAI,CAACrB,aAAa,GAAG,oBAAoB;QACzC,IAAI,CAACC,cAAc,GAAG,IAAI;QAC1BiC,UAAU,CAAC,MAAK;UACd,IAAI,CAACrC,MAAM,CAACsC,OAAO,CAAC,IAAI,CAACnC,aAAa,EAAE,SAAS,CAAC;UAClD,IAAI,CAACN,MAAM,CAACsC,QAAQ,CAAC,CAAC,WAAW,CAAC,CAAC;QACrC,CAAC,EAAE,IAAI,CAAC;QACR,IAAI,CAAChB,eAAe,EAAE;QAEtB,IAAI,CAACjB,mBAAmB,GAAG,IAAI;QAC/B,IAAI,CAACD,mBAAmB,GAAG,KAAK;MAClC,CAAC,CAAC;KAEH,MACK;MACF8B,OAAO,CAACQ,GAAG,CAAC,wBAAwB,CAAC;;EAE3C;EAEAC,kBAAkBA,CAAC9B,QAAkB;IACnC,IAAI,CAACR,mBAAmB,GAAGQ,QAAQ;EACrC;EAEA+B,SAASA,CAAC/B,QAAa;IACrBqB,OAAO,CAACQ,GAAG,CAAC,QAAQ,CAAC;IACrBR,OAAO,CAACQ,GAAG,CAAC,IAAI,CAACG,gBAAgB,GAAGhC,QAAQ,CAAC;IAC7C,IAAI,CAACgC,gBAAgB,GAAGhC,QAAQ;EAElC;EAEAiC,UAAUA,CAAA;IACR,IAAI,CAACD,gBAAgB,GAAG,IAAI;IAC5B,IAAI,CAAC7C,MAAM,CAACsC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC;EACtC;EAEAT,mBAAmBA,CAAA;IACjB,IAAI,CAACrB,SAAS,GAAG,IAAI,CAACA,SAAS,CAACuC,MAAM,CAAClC,QAAQ,IAAIA,QAAQ,CAACC,YAAY,KAAKkC,SAAS,CAAC;IACvF,IAAI,CAACxC,SAAS,CAACyC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAI;MAC7B,MAAMC,KAAK,GAAGF,CAAC,CAACpC,YAAa,CAACuC,WAAW,EAAE;MAC3C,MAAMC,KAAK,GAAGH,CAAC,CAACrC,YAAa,CAACuC,WAAW,EAAE;MAC3C,IAAID,KAAK,GAAGE,KAAK,EAAE;QACjB,OAAO,CAAC,CAAC;;MAEX,IAAIF,KAAK,GAAGE,KAAK,EAAE;QACjB,OAAO,CAAC;;MAEV,OAAO,CAAC;IACV,CAAC,CAAC;EACF;EAEAC,YAAYA,CAAA;IACV,IAAI,CAACvD,MAAM,CAACsC,QAAQ,CAAC,CAAC,WAAW,CAAC,CAAC;EACrC;CAED;AAxIYzC,qBAAqB,GAAA2D,UAAA,EALjC5D,SAAS,CAAC;EACT6D,QAAQ,EAAE,mBAAmB;EAC7BC,WAAW,EAAE,gCAAgC;EAC7CC,SAAS,EAAE,CAAC,gCAAgC;CAC7C,CAAC,C,EACW9D,qBAAqB,CAwIjC;SAxIYA,qBAAqB"},"metadata":{},"sourceType":"module","externalDependencies":[]}