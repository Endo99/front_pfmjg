{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Input } from '@angular/core';\nimport { Paciente } from 'src/app/models/paciente';\nlet HomeAgendamentoComponent = class HomeAgendamentoComponent {\n  constructor(router, route, renderer, toastr, pacienteService, el, dataService, datePipe) {\n    this.router = router;\n    this.route = route;\n    this.renderer = renderer;\n    this.toastr = toastr;\n    this.pacienteService = pacienteService;\n    this.el = el;\n    this.dataService = dataService;\n    this.datePipe = datePipe;\n    this.nomePaciente = '';\n    this.dataConsulta = new Date();\n    this.horaConsulta = new Date();\n    this.tipoConsulta = '';\n    this.pacientes = [];\n    this.agendamentos = [];\n    this.consultas = [];\n    this.pacientesComDadosRelacionados = [];\n    this.exibirPopupExclusao = false;\n    this.pacienteSelecionado = null;\n    this.sucessMessage = \"\";\n    this.exibirMensagem = false;\n    this.paciente = {\n      idPaciente: 0,\n      cpf: '',\n      nomePaciente: '',\n      dataNascimentoPaciente: new Date(),\n      idadePaciente: 0,\n      estado: '',\n      cidade: '',\n      telefone: ''\n    };\n    this.consulta = {\n      idConsulta: 0,\n      paciente: new Paciente(),\n      agendamento: 0,\n      tipoConsulta: '',\n      formaPagamento: ''\n    };\n    this.agenda = {\n      idAgendamento: 0,\n      paciente: new Paciente(),\n      dataInicio: new Date(),\n      descricao: '',\n      horaFinal: new Date(),\n      horarioInicio: new Date()\n    };\n    this.listMenu = [{\n      legenda: \"Home\",\n      iconSvg: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-house-door\" viewBox=\"0 0 16 16\"><path d=\"M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146ZM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5Z\"/></svg>',\n      alt: \"Figura de uma casa\"\n    }, {\n      legenda: \"Desempenho\",\n      iconSvg: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-graph-up\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M0 0h1v15h15v1H0V0Zm14.817 3.113a.5.5 0 0 1 .07.704l-4.5 5.5a.5.5 0 0 1-.74.037L7.06 6.767l-3.656 5.027a.5.5 0 0 1-.808-.588l4-5.5a.5.5 0 0 1 .758-.06l2.609 2.61 4.15-5.073a.5.5 0 0 1 .704-.07Z\"/></svg>',\n      alt: \"Figura de gráfico\"\n    }, {\n      legenda: \"Relatório\",\n      iconSvg: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-clipboard2-data\" viewBox=\"0 0 16 16\"><path d=\"M9.5 0a.5.5 0 0 1 .5.5.5.5 0 0 0 .5.5.5.5 0 0 1 .5.5V2a.5.5 0 0 1-.5.5h-5A.5.5 0 0 1 5 2v-.5a.5.5 0 0 1 .5-.5.5.5 0 0 0 .5-.5.5.5 0 0 1 .5-.5h3Z\"/><path d=\"M3 2.5a.5.5 0 0 1 .5-.5H4a.5.5 0 0 0 0-1h-.5A1.5 1.5 0 0 0 2 2.5v12A1.5 1.5 0 0 0 3.5 16h9a1.5 1.5 0 0 0 1.5-1.5v-12A1.5 1.5 0 0 0 12.5 1H12a.5.5 0 0 0 0 1h.5a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5v-12Z\"/><path d=\"M10 7a1 1 0 1 1 2 0v5a1 1 0 1 1-2 0V7Zm-6 4a1 1 0 1 1 2 0v1a1 1 0 1 1-2 0v-1Zm4-3a1 1 0 0 0-1 1v3a1 1 0 1 0 2 0V9a1 1 0 0 0-1-1Z\"/></svg>',\n      alt: \"Figura de calendário\"\n    }, {\n      legenda: \"Metas\",\n      iconSvg: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-check2-square\" viewBox=\"0 0 16 16\"><path d=\"M3 14.5A1.5 1.5 0 0 1 1.5 13V3A1.5 1.5 0 0 1 3 1.5h8a.5.5 0 0 1 0 1H3a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V8a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5H3z\"/><path d=\"m8.354 10.354 7-7a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0z\"/></svg>',\n      alt: \"Figura de uma prancha com três linhas verticais em crescente\"\n    }, {\n      legenda: \"Gastos\",\n      iconSvg: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-currency-exchange\" viewBox=\"0 0 16 16\"><path d=\"M0 5a5.002 5.002 0 0 0 4.027 4.905 6.46 6.46 0 0 1 .544-2.073C3.695 7.536 3.132 6.864 3 5.91h-.5v-.426h.466V5.05c0-.046 0-.093.004-.135H2.5v-.427h.511C3.236 3.24 4.213 2.5 5.681 2.5c.316 0 .59.031.819.085v.733a3.46 3.46 0 0 0-.815-.082c-.919 0-1.538.466-1.734 1.252h1.917v.427h-1.98c-.003.046-.003.097-.003.147v.422h1.983v.427H3.93c.118.602.468 1.03 1.005 1.229a6.5 6.5 0 0 1 4.97-3.113A5.002 5.002 0 0 0 0 5zm16 5.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0zm-7.75 1.322c.069.835.746 1.485 1.964 1.562V14h.54v-.62c1.259-.086 1.996-.74 1.996-1.69 0-.865-.563-1.31-1.57-1.54l-.426-.1V8.374c.54.06.884.347.966.745h.948c-.07-.804-.779-1.433-1.914-1.502V7h-.54v.629c-1.076.103-1.808.732-1.808 1.622 0 .787.544 1.288 1.45 1.493l.358.085v1.78c-.554-.08-.92-.376-1.003-.787H8.25zm1.96-1.895c-.532-.12-.82-.364-.82-.732 0-.41.311-.719.824-.809v1.54h-.005zm.622 1.044c.645.145.943.38.943.796 0 .474-.37.8-1.02.86v-1.674l.077.018z\"/></svg>',\n      alt: \"Figura de duas moedas\"\n    }, {\n      legenda: \"Pacientes\",\n      iconSvg: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-person-square\" viewBox=\"0 0 16 16\"> <path d=\"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z\"/> <path d=\"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm12 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1v-1c0-1-1-4-6-4s-6 3-6 4v1a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12z\"/></svg>',\n      alt: \"Figura de um boneco de silhueta de pessoa dentro de um quadrado\"\n    }, {\n      legenda: \"Agendar\",\n      iconSvg: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-house-door\" viewBox=\"0 0 16 16\"><path d=\"M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146ZM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5Z\"/></svg>',\n      alt: \"Figura de calendário\"\n    }];\n  }\n  ngOnInit() {\n    this.listarPacientes();\n    if (this.pacienteSelecionado) {\n      this.renderer.addClass(document.body, 'paciente-selecionado');\n    }\n    this.dataService.getPacientes().subscribe(data => {\n      this.pacientes = data;\n    });\n    this.dataService.getAgendamentos().subscribe(data => {\n      this.agendamentos = data;\n    });\n    this.dataService.getConsultas().subscribe(data => {\n      this.consultas = data;\n    });\n    this.listarDados();\n  }\n  listarDados() {\n    // Consultar dados dos pacientes, agendamentos e consultas aqui\n    this.dataService.getPacientes().subscribe(pacientes => {\n      this.pacientes = pacientes;\n      this.dataService.getAgendamentos().subscribe(agendamentos => {\n        this.agendamentos = agendamentos;\n        this.dataService.getConsultas().subscribe(consultas => {\n          this.consultas = consultas;\n          // Associe os dados e atualize pacientesComDadosRelacionados\n          this.associaDadosPacientesAgendamentoConsulta();\n        });\n      });\n    });\n  }\n  associaDadosPacientesAgendamentoConsulta() {\n    // Crie um mapa (dicionário) onde a chave seja o idPaciente e o valor seja um objeto com informações relacionadas\n    const pacientesDataMap = new Map();\n    // Associar dados de pacientes\n    for (const paciente of this.pacientes) {\n      if (paciente.idPaciente !== undefined) {\n        // Verifique se idPaciente é definido\n        pacientesDataMap.set(paciente.idPaciente, {\n          paciente: paciente,\n          agendamento: null,\n          consulta: null\n        });\n      }\n    }\n    // Associar dados de agendamentos\n    for (const agendamento of this.agendamentos) {\n      if (agendamento.idPaciente !== undefined) {\n        const pacienteData = pacientesDataMap.get(agendamento.idPaciente);\n        if (pacienteData) {\n          pacienteData.agendamento = agendamento;\n        }\n      }\n    }\n    // Associar dados de consultas\n    for (const consulta of this.consultas) {\n      if (consulta.idPaciente !== undefined) {\n        const pacienteData = pacientesDataMap.get(consulta.idPaciente);\n        if (pacienteData) {\n          pacienteData.consulta = consulta;\n        }\n      }\n    }\n    // Converter o mapa de volta em uma lista de pacientes com informações relacionadas\n    this.pacientesComDadosRelacionados = [...pacientesDataMap.values()];\n    // Converter o mapa de volta em uma lista de pacientes com informações relacionadas\n    this.pacientesComDadosRelacionados = [...pacientesDataMap.values()];\n  }\n  listarPacientes() {\n    this.pacienteService.getPaciente().subscribe(data => {\n      this.pacientes = data;\n      this.sortPacientesByNome();\n    });\n  }\n  sortPacientesByNome() {\n    this.pacientes = this.pacientes.filter(paciente => paciente.nomePaciente !== undefined);\n    this.pacientes.sort((a, b) => {\n      const nomeA = a.nomePaciente.toLowerCase();\n      const nomeB = b.nomePaciente.toLowerCase();\n      if (nomeA < nomeB) {\n        return -1;\n      }\n      if (nomeA > nomeB) {\n        return 1;\n      }\n      return 0;\n    });\n  }\n  voltarPagina() {\n    this.router.navigate(['pacientes']);\n  }\n  excluirPaciente() {\n    if (this.pacienteSelecionado && this.pacienteSelecionado.idPaciente) {\n      const idPaciente = this.pacienteSelecionado.idPaciente;\n      this.pacienteService.excluirPaciente(idPaciente).subscribe(() => {\n        this.sucessMessage = \"Paciente Excluído!\";\n        this.exibirMensagem = true;\n        setTimeout(() => {\n          this.toastr.success(this.sucessMessage, 'Sucesso');\n          this.router.navigate(['pacientes']);\n        }, 2000);\n        this.listarPacientes();\n        this.pacienteSelecionado = null;\n        this.exibirPopupExclusao = false;\n      });\n    } else {\n      console.log(\"Não encontrado ou erro\");\n    }\n  }\n};\n__decorate([Input()], HomeAgendamentoComponent.prototype, \"nomePaciente\", void 0);\n__decorate([Input()], HomeAgendamentoComponent.prototype, \"dataConsulta\", void 0);\n__decorate([Input()], HomeAgendamentoComponent.prototype, \"horaConsulta\", void 0);\n__decorate([Input()], HomeAgendamentoComponent.prototype, \"tipoConsulta\", void 0);\nHomeAgendamentoComponent = __decorate([Component({\n  selector: 'app-home-agendamento',\n  templateUrl: './home-agendamento.component.html',\n  styleUrls: ['./home-agendamento.component.scss']\n})], HomeAgendamentoComponent);\nexport { HomeAgendamentoComponent };","map":{"version":3,"names":["Component","Input","Paciente","HomeAgendamentoComponent","constructor","router","route","renderer","toastr","pacienteService","el","dataService","datePipe","nomePaciente","dataConsulta","Date","horaConsulta","tipoConsulta","pacientes","agendamentos","consultas","pacientesComDadosRelacionados","exibirPopupExclusao","pacienteSelecionado","sucessMessage","exibirMensagem","paciente","idPaciente","cpf","dataNascimentoPaciente","idadePaciente","estado","cidade","telefone","consulta","idConsulta","agendamento","formaPagamento","agenda","idAgendamento","dataInicio","descricao","horaFinal","horarioInicio","listMenu","legenda","iconSvg","alt","ngOnInit","listarPacientes","addClass","document","body","getPacientes","subscribe","data","getAgendamentos","getConsultas","listarDados","associaDadosPacientesAgendamentoConsulta","pacientesDataMap","Map","undefined","set","pacienteData","get","values","getPaciente","sortPacientesByNome","filter","sort","a","b","nomeA","toLowerCase","nomeB","voltarPagina","navigate","excluirPaciente","setTimeout","success","console","log","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\welli\\front_pfmjg\\pfmjg\\src\\app\\module\\pages\\agendamento\\home-agendamento\\home-agendamento.component.ts"],"sourcesContent":["import { Time } from '@angular/common';\nimport { Component, Input, ViewChild, ElementRef, Renderer2 } from '@angular/core';\nimport { ɵDomRendererFactory2 } from '@angular/platform-browser';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { DayPilotCalendarComponent } from '@daypilot/daypilot-lite-angular';\nimport { ToastrService } from 'ngx-toastr';\nimport { Agendamento } from 'src/app/models/agendamento/agendamento';\nimport { Consulta } from 'src/app/models/consulta/consulta';\nimport { Paciente } from 'src/app/models/paciente';\nimport { DataService } from 'src/app/services/data.service';\nimport { ServicePaciente } from 'src/app/services/service-paciente.service';\n\n@Component({\n  selector: 'app-home-agendamento',\n  templateUrl: './home-agendamento.component.html',\n  styleUrls: ['./home-agendamento.component.scss']\n})\nexport class HomeAgendamentoComponent{\n\n  @Input() nomePaciente: String = ''\n\n  @Input() dataConsulta: Date = new Date();\n\n  @Input() horaConsulta: Date = new Date();\n\n  @Input() tipoConsulta: String = '';\n\n  pacientes: Paciente[] = [];\n  agendamentos: any[] = [];\n  consultas: any[] = [];\n  pacientesComDadosRelacionados: any[] = [];\n\n  exibirPopupExclusao = false;\n  pacienteSelecionado: Paciente | null = null;\n\n  sucessMessage: string = \"\";\n\n  exibirMensagem: boolean = false;\n\n  selectedPaciente: any;\n\n  paciente: Paciente = {\n    idPaciente: 0,\n    cpf: '',\n    nomePaciente: '',\n    dataNascimentoPaciente: new Date(),\n    idadePaciente: 0,\n    estado: '',\n    cidade: '',\n    telefone: ''\n  }\n\n  consulta: Consulta = {\n    idConsulta: 0,\n    paciente: new Paciente,\n    agendamento: 0,\n    tipoConsulta: '',\n    formaPagamento: '',\n  }\n\n  agenda: Agendamento = {\n    \n    idAgendamento: 0,\n    paciente: new Paciente,\n    dataInicio: new Date,\n    descricao: '',\n    horaFinal: new Date,\n    horarioInicio: new Date,\n\n  }\n\n\n  readonly listMenu = [\n    { \n      legenda: \"Home\",\n      iconSvg: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-house-door\" viewBox=\"0 0 16 16\"><path d=\"M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146ZM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5Z\"/></svg>',\n      alt: \"Figura de uma casa\"\n    },\n    {\n      legenda: \"Desempenho\",\n      iconSvg: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-graph-up\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M0 0h1v15h15v1H0V0Zm14.817 3.113a.5.5 0 0 1 .07.704l-4.5 5.5a.5.5 0 0 1-.74.037L7.06 6.767l-3.656 5.027a.5.5 0 0 1-.808-.588l4-5.5a.5.5 0 0 1 .758-.06l2.609 2.61 4.15-5.073a.5.5 0 0 1 .704-.07Z\"/></svg>',\n      alt: \"Figura de gráfico\"\n    },\n    {\n      legenda: \"Relatório\",\n      iconSvg: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-clipboard2-data\" viewBox=\"0 0 16 16\"><path d=\"M9.5 0a.5.5 0 0 1 .5.5.5.5 0 0 0 .5.5.5.5 0 0 1 .5.5V2a.5.5 0 0 1-.5.5h-5A.5.5 0 0 1 5 2v-.5a.5.5 0 0 1 .5-.5.5.5 0 0 0 .5-.5.5.5 0 0 1 .5-.5h3Z\"/><path d=\"M3 2.5a.5.5 0 0 1 .5-.5H4a.5.5 0 0 0 0-1h-.5A1.5 1.5 0 0 0 2 2.5v12A1.5 1.5 0 0 0 3.5 16h9a1.5 1.5 0 0 0 1.5-1.5v-12A1.5 1.5 0 0 0 12.5 1H12a.5.5 0 0 0 0 1h.5a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5v-12Z\"/><path d=\"M10 7a1 1 0 1 1 2 0v5a1 1 0 1 1-2 0V7Zm-6 4a1 1 0 1 1 2 0v1a1 1 0 1 1-2 0v-1Zm4-3a1 1 0 0 0-1 1v3a1 1 0 1 0 2 0V9a1 1 0 0 0-1-1Z\"/></svg>',\n      alt: \"Figura de calendário\"\n    },\n    {\n      legenda: \"Metas\",\n      iconSvg: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-check2-square\" viewBox=\"0 0 16 16\"><path d=\"M3 14.5A1.5 1.5 0 0 1 1.5 13V3A1.5 1.5 0 0 1 3 1.5h8a.5.5 0 0 1 0 1H3a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V8a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5H3z\"/><path d=\"m8.354 10.354 7-7a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0z\"/></svg>',\n      alt: \"Figura de uma prancha com três linhas verticais em crescente\"\n    },\n    {\n      legenda: \"Gastos\",\n      iconSvg: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-currency-exchange\" viewBox=\"0 0 16 16\"><path d=\"M0 5a5.002 5.002 0 0 0 4.027 4.905 6.46 6.46 0 0 1 .544-2.073C3.695 7.536 3.132 6.864 3 5.91h-.5v-.426h.466V5.05c0-.046 0-.093.004-.135H2.5v-.427h.511C3.236 3.24 4.213 2.5 5.681 2.5c.316 0 .59.031.819.085v.733a3.46 3.46 0 0 0-.815-.082c-.919 0-1.538.466-1.734 1.252h1.917v.427h-1.98c-.003.046-.003.097-.003.147v.422h1.983v.427H3.93c.118.602.468 1.03 1.005 1.229a6.5 6.5 0 0 1 4.97-3.113A5.002 5.002 0 0 0 0 5zm16 5.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0zm-7.75 1.322c.069.835.746 1.485 1.964 1.562V14h.54v-.62c1.259-.086 1.996-.74 1.996-1.69 0-.865-.563-1.31-1.57-1.54l-.426-.1V8.374c.54.06.884.347.966.745h.948c-.07-.804-.779-1.433-1.914-1.502V7h-.54v.629c-1.076.103-1.808.732-1.808 1.622 0 .787.544 1.288 1.45 1.493l.358.085v1.78c-.554-.08-.92-.376-1.003-.787H8.25zm1.96-1.895c-.532-.12-.82-.364-.82-.732 0-.41.311-.719.824-.809v1.54h-.005zm.622 1.044c.645.145.943.38.943.796 0 .474-.37.8-1.02.86v-1.674l.077.018z\"/></svg>',\n      alt: \"Figura de duas moedas\"\n    },\n    {\n      legenda: \"Pacientes\",\n      iconSvg: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-person-square\" viewBox=\"0 0 16 16\"> <path d=\"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z\"/> <path d=\"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm12 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1v-1c0-1-1-4-6-4s-6 3-6 4v1a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12z\"/></svg>',\n      alt: \"Figura de um boneco de silhueta de pessoa dentro de um quadrado\"\n    },\n    {\n      legenda: \"Agendar\",\n      iconSvg: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-house-door\" viewBox=\"0 0 16 16\"><path d=\"M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146ZM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5Z\"/></svg>',\n      alt: \"Figura de calendário\"\n    },\n  ];\n\n  constructor(private router: Router, private route: ActivatedRoute,\n    private renderer: Renderer2, private toastr: ToastrService, private pacienteService: ServicePaciente, private el: ElementRef\n    , private dataService: DataService, private datePipe: DatePipe) {\n      \n     }\n\n     ngOnInit(): void {\n    \n      this.listarPacientes();\n      if (this.pacienteSelecionado) {\n        this.renderer.addClass(document.body, 'paciente-selecionado');\n      }\n\n      this.dataService.getPacientes().subscribe(data => {\n        this.pacientes = data;\n      });\n  \n      this.dataService.getAgendamentos().subscribe(data => {\n        this.agendamentos = data;\n      });\n  \n      this.dataService.getConsultas().subscribe(data => {\n        this.consultas = data;\n      });\n      \n      this.listarDados();\n    }\n    \n    listarDados() {\n      // Consultar dados dos pacientes, agendamentos e consultas aqui\n      this.dataService.getPacientes().subscribe((pacientes) => {\n        this.pacientes = pacientes;\n  \n        this.dataService.getAgendamentos().subscribe((agendamentos) => {\n          this.agendamentos = agendamentos;\n  \n          this.dataService.getConsultas().subscribe((consultas) => {\n            this.consultas = consultas;\n  \n            // Associe os dados e atualize pacientesComDadosRelacionados\n            this.associaDadosPacientesAgendamentoConsulta();\n          });\n        });\n      });\n    }\n  \n    associaDadosPacientesAgendamentoConsulta() {\n      // Crie um mapa (dicionário) onde a chave seja o idPaciente e o valor seja um objeto com informações relacionadas\n      const pacientesDataMap = new Map<number, any>();\n\n      // Associar dados de pacientes\n      for (const paciente of this.pacientes) {\n        if (paciente.idPaciente !== undefined) { // Verifique se idPaciente é definido\n          pacientesDataMap.set(paciente.idPaciente, {\n            paciente: paciente,\n            agendamento: null,\n            consulta: null,\n          });\n        }\n      }\n    \n      // Associar dados de agendamentos\n      for (const agendamento of this.agendamentos) {\n        if (agendamento.idPaciente !== undefined) {\n          const pacienteData = pacientesDataMap.get(agendamento.idPaciente);\n          if (pacienteData) {\n            pacienteData.agendamento = agendamento;\n          }\n        }\n      }\n    \n      // Associar dados de consultas\n      for (const consulta of this.consultas) {\n        if (consulta.idPaciente !== undefined) {\n          const pacienteData = pacientesDataMap.get(consulta.idPaciente);\n          if (pacienteData) {\n            pacienteData.consulta = consulta;\n          }\n        }\n      }\n    \n      // Converter o mapa de volta em uma lista de pacientes com informações relacionadas\n      this.pacientesComDadosRelacionados = [...pacientesDataMap.values()];\n    \n      // Converter o mapa de volta em uma lista de pacientes com informações relacionadas\n      this.pacientesComDadosRelacionados = [...pacientesDataMap.values()];\n    }\n\n    listarPacientes(): void {\n        this.pacienteService.getPaciente().subscribe(data => {\n        this.pacientes = data;\n        this.sortPacientesByNome();\n      })\n    }\n\n    sortPacientesByNome() {\n      this.pacientes = this.pacientes.filter(paciente => paciente.nomePaciente !== undefined);\n      this.pacientes.sort((a, b) => {\n      const nomeA = a.nomePaciente!.toLowerCase();\n      const nomeB = b.nomePaciente!.toLowerCase();\n      if (nomeA < nomeB) {\n        return -1;\n      }\n      if (nomeA > nomeB) {\n        return 1;\n      }\n      return 0;\n    });\n    }\n    \n    voltarPagina(): void {\n      this.router.navigate(['pacientes'])\n    }\n     excluirPaciente() {\n\n\n      if (this.pacienteSelecionado && this.pacienteSelecionado.idPaciente) {\n  \n        const idPaciente = this.pacienteSelecionado.idPaciente;\n        this.pacienteService.excluirPaciente(idPaciente). subscribe( () => {\n          \n          \n          \n          this.sucessMessage = \"Paciente Excluído!\";\n          this.exibirMensagem = true;\n          setTimeout(() => {\n            this.toastr.success(this.sucessMessage, 'Sucesso');\n            this.router.navigate(['pacientes']);\n          }, 2000)\n          this.listarPacientes();\n  \n          this.pacienteSelecionado = null;\n          this.exibirPopupExclusao = false;\n        });\n      \n      }\n      else  {\n          console.log(\"Não encontrado ou erro\");\n      }\n    }\n  \n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}